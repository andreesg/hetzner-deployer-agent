# Templates

This directory contains templates and examples for the Hetzner Deployer Agent.

## manifest.example.json

Example structure for the `.hetzner-deployer/manifest.json` file that tracks bundle state.

### Fields

| Field | Description |
|-------|-------------|
| `version` | Manifest schema version |
| `generated_at` | ISO 8601 timestamp of last generation |
| `prompt_hash` | SHA256 hash of the prompt used |
| `app_repo_commit` | Git commit hash of the app repo at generation time |
| `files` | Map of relative paths to file metadata |
| `detection_summary` | Summary of detected app characteristics |

### File Metadata

Each file entry contains:

| Field | Description |
|-------|-------------|
| `generated_hash` | Hash when file was generated by the agent |
| `current_hash` | Current hash of the file on disk |
| `managed` | Whether this file is managed by the agent |
| `user_modified` | `true` if `current_hash != generated_hash` |
| `last_updated` | Timestamp of last update |

### Usage

The manifest is automatically created and updated by the runner script. It enables:

1. **Change detection** — Identify user modifications before updates
2. **Incremental updates** — Only regenerate what's needed
3. **Conflict resolution** — Preserve user changes with `.new` files
4. **Rollback support** — History stored in `.hetzner-deployer/history/`
